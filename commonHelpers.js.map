{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/script.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = '41002139-ab30ad0ff8976a28ff14eed97';\n\nasync function fetchImages(query, page = 1, perPage = 40) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport { fetchImages };\n","import { fetchImages } from './api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\nlet totalHits = 0;\n\ndocument\n  .getElementById('search-form')\n  .addEventListener('submit', async function (event) {\n    event.preventDefault();\n    clearGallery();\n    currentPage = 1;\n    const searchQuery = event.target.elements.searchQuery.value;\n    await performSearch(searchQuery);\n  });\n\nwindow.addEventListener('scroll', () => {\n  if (\n    window.scrollY + window.innerHeight >=\n    document.documentElement.scrollHeight\n  ) {\n    loadMoreImages();\n  }\n});\n\nasync function loadMoreImages() {\n  currentPage++;\n  const searchQuery =\n    document.getElementById('search-form').elements.searchQuery.value;\n  await performSearch(searchQuery);\n}\n\nasync function performSearch(query) {\n  try {\n    const data = await fetchImages(query, currentPage);\n    totalHits = data.totalHits;\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n    } else {\n      displayImages(data.hits);\n      if (currentPage === 1) {\n        iziToast.success({\n          title: 'Hooray!',\n          message: `We found ${totalHits} images.`,\n          position: 'topRight',\n        });\n      }\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Error fetching images',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction displayImages(images) {\n  images.forEach(image => {\n    const cardHTML = `\n            <div class=\"photo-card\">\n                <a href=\"${image.largeImageURL}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"info\">\n                    <div class=\"info-item\">\n                        <b>Likes</b>\n                        <span>${image.likes}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <b>Views</b>\n                        <span>${image.views}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <b>Comments</b>\n                        <span>${image.comments}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <b>Downloads</b>\n                        <span>${image.downloads}</span>\n                    </div>\n                </div>\n            </div>`;\n    gallery.insertAdjacentHTML('beforeend', cardHTML);\n  });\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {});\n  }\n\n  if (currentPage > 1) {\n    smoothScroll();\n  }\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n  if (lightbox) {\n    lightbox.destroy();\n    lightbox = null;\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["apiKey","fetchImages","query","page","perPage","url","axios","error","currentPage","gallery","lightbox","totalHits","event","clearGallery","searchQuery","performSearch","loadMoreImages","data","iziToast","displayImages","images","image","cardHTML","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAS,qCAEf,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CACxD,MAAMC,EAAM,gCAAgCL,OAAY,mBACtDE,CACD,kEAAiEC,cAAiBC,IAEnF,GAAI,CAEF,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACjB,OAAQE,EAAP,CACA,MAAMA,CACP,CACH,CCTA,IAAIC,EAAc,EAClB,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EACAC,EAAY,EAEhB,SACG,eAAe,aAAa,EAC5B,iBAAiB,SAAU,eAAgBC,EAAO,CACjDA,EAAM,eAAc,EACpBC,IACAL,EAAc,EACd,MAAMM,EAAcF,EAAM,OAAO,SAAS,YAAY,MACtD,MAAMG,EAAcD,CAAW,CACnC,CAAG,EAEH,OAAO,iBAAiB,SAAU,IAAM,CAEpC,OAAO,QAAU,OAAO,aACxB,SAAS,gBAAgB,cAEzBE,GAEJ,CAAC,EAED,eAAeA,GAAiB,CAC9BR,IACA,MAAMM,EACJ,SAAS,eAAe,aAAa,EAAE,SAAS,YAAY,MAC9D,MAAMC,EAAcD,CAAW,CACjC,CAEA,eAAeC,EAAcb,EAAO,CAClC,GAAI,CACF,MAAMe,EAAO,MAAMhB,EAAYC,EAAOM,CAAW,EACjDG,EAAYM,EAAK,UACbA,EAAK,KAAK,SAAW,EACvBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,GAEDC,EAAcF,EAAK,IAAI,EACnBT,IAAgB,GAClBU,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,YAAYP,YACrB,SAAU,UACpB,CAAS,EAGN,OAAQJ,EAAP,CACA,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CW,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASC,EAAcC,EAAQ,CAC7BA,EAAO,QAAQC,GAAS,CACtB,MAAMC,EAAW;AAAA;AAAA,2BAEMD,EAAM;AAAA,gCACDA,EAAM,sBAAsBA,EAAM;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKlCA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA;AAAA,gCAINA,EAAM;AAAA;AAAA;AAAA,oBAIlCZ,EAAQ,mBAAmB,YAAaa,CAAQ,CACpD,CAAG,EAEGZ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIa,EAAe,aAAc,CAAE,CAAA,EAG5Cf,EAAc,GAChBgB,GAEJ,CAEA,SAASX,GAAe,CACtBJ,EAAQ,UAAY,GAChBC,IACFA,EAAS,QAAO,EAChBA,EAAW,KAEf,CAEA,SAASc,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAY,EAC1BhB,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAKgB,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}